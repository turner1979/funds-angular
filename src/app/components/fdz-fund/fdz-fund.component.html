<div class="fdz-fund">

  <fdz-header></fdz-header>
  <fdz-content-container>

    <div class="fdz-fund__controls">
      <fdz-icon [iconClass]="'fas fa-chevron-left'" (click)="onBackClick()"></fdz-icon>
    </div>

    <ng-container *ngIf="fund$ | async as fund">
      <fdz-fund-card [fund]="fund" [showEdit]="false">
       
        <fdz-tabs [options]="{ 
          activeIndex: activeTabIndex,
          tabs: [
            { iconClass: 'fas fa-info-circle', name: 'Overview' },
            { iconClass: 'fas fa-pencil-alt', name: 'Edit' },
            { iconClass: 'fas fa-coins', name: 'Add Contribution' }
          ]
        }" (tabChange)="onTabChange($event);">

        <ng-container *ngIf="activeTabIndex === 0">
          <fdz-fund-progress [fund]="fund"></fdz-fund-progress>

          <div class="fdz-fund__divider"></div>

          <p><strong>Fund Contributions</strong></p>
          <table>
            <thead>
              <tr>
                <th>Date</th>
                <th>Name</th>
                <th>Amount</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>00/00/00</td>
                <td>Fund Name</td>
                <td>£0.00</td>
              </tr>
              <tr>
                <td>00/00/00</td>
                <td>Fund Name</td>
                <td>£0.00</td>
              </tr>
              <tr>
                <td>00/00/00</td>
                <td>Fund Name</td>
                <td>£0.00</td>
              </tr>
            </tbody>
          </table>

        </ng-container>
        <ng-container *ngIf="activeTabIndex === 1">

          <p><strong>Edit Fund</strong></p>
          <form class="fdz-fund__form" [formGroup]="editFundForm" (ngSubmit)="onEditFundSubmit()">
            <div class="fdz-fund__form-row" [ngClass]="{ 
              'invalid' : editFundForm.controls['name'].invalid && editFundForm.controls['name'].dirty,
              'valid' : editFundForm.controls['name'].valid && editFundForm.controls['name'].dirty }">
              <input type="text" formControlName="name" [placeholder]="fund?.name" />
            </div>
            <div class="fdz-fund__form-row" [ngClass]="{ 
              'invalid' : editFundForm.controls['target'].invalid && editFundForm.controls['target'].dirty,
              'valid' : editFundForm.controls['target'].valid && editFundForm.controls['target'].dirty }">
              <input type="text" formControlName="target" [placeholder]="fund?.target" maxlength="12" mask="separator.0" thousandSeparator="," />
            </div>
            <fdz-button [options]="{ dark: true, text: 'Add', type: 'submit' }"></fdz-button>
          </form>

        </ng-container>
        <ng-container *ngIf="activeTabIndex === 2">

          <p><strong>Add Contribution</strong></p>
          <form class="fdz-fund__form" [formGroup]="addContributionForm" (ngSubmit)="onAddContributionSubmit()">
            <div class="fdz-fund__form-row">
              <input type="text" formControlName="date" placeholder="Date DD/MM/YY" />
            </div>
            <div class="fdz-fund__form-row">
              <input type="text" formControlName="name" placeholder="Name" />
            </div>
            <div class="fdz-fund__form-row">
              <input type="text" formControlName="amount" placeholder="Amount" />
            </div>
            <fdz-button [options]="{ dark: true, text: 'Add', type: 'submit' }"></fdz-button>
          </form>

        </ng-container>

      </fdz-tabs>

      </fdz-fund-card>
    </ng-container>

    <fdz-footer></fdz-footer>
  </fdz-content-container>

</div>
